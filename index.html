<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/concurso.css">   
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

  </head>
  <body>
    <div class="contenedorMain">  
    <div class="contenedorMenu">
      <br>
      <br>
      <p>Subir imagen</p>
      <input type="file" id="seleccionArchivos" accept="image/*"> 
      <br>
      <br>
      <p>Nombre del personaje </p>
      <input type="text" id="namePer" />
      <button onclick="guardarTextoP()">Guardar Nombre</button>
      <br>
      <br>
      <p>Rol del personaje</p>
      <select id="lista" onchange="mostrarImagen()">
        <option value="">Seleccione una opción</option>
        <option value="img/mago.png">Mago</option>
        <option value="img/adc.png">Tirador</option>
        <option value="img/asesino.png">Asesino</option>
        <option value="img/luchador.png">Luchador</option>
        <option value="img/tanque.png">Tanque</option>
        <option value="img/sup.png">Soporte</option>
      </select>
      <br>
      <br>
      <p>Descripcion de la hablidad Q</p>
      <textarea id="descriQ" rows="6" cols="73" maxlenght=443></textarea>
      <br>
      <button onclick="guardarTextoQ()">Guardar Q</button>
      <br>
      <br>
      <p>Descripcion de la hablidad W</p>
      <textarea id="descriW" rows="4" cols="50"></textarea>
      <br>
      <button onclick="guardarTextoW()">Guardar W</button>
      <br>
      <br>
      <p>Descripcion de la hablidad E</p>
      <textarea id="descriE" rows="4" cols="50"></textarea>
      <br>
      <button onclick="guardarTextoE()">Guardar E</button>
      <br>
      <br>
      <p>Descripcion de la hablidad R</p>
      <textarea id="descriR" rows="4" cols="50"></textarea>
      <br>
      <button onclick="guardarTextoR()">Guardar R</button>
      <br>
      <br>
      <button onclick="downloadImage()">Capturar Imagen</button>


			
    </div>

    <div class="box" id="box">
      <div class="contenedor2"> 
        <div class="bordeContenedorImg">
          <img class="contenedorImg" id="imagenPrevisualizacion"> 
        </div>
        <div class="caja2" id="personaje"> 
          <br>
        </div>
        <div id="contenedorImagen">
          <img id="imagen" src="" alt="Imagen">
        </div>
      </div>

      <div class="contenedor">
        <div class="contenedorImgHabQ"></div>
        <div class="caja" id="contenedorQ">
        <h1 id="tituloQ"></h1>
        </div>
      </div>

      <div class="contenedor3">
        <div class="contenedorImgHabW"></div>
        <div class="caja" id="contenedorW"> </div>
      </div>
      <div class="contenedor4">
        <div class="contenedorImgHabE" ></div>
        <div class="caja" id="contenedorE"> </div>
      </div>
      <div class="contenedor5">
        <div class="contenedorImgHabR" ></div>
        <div class="caja" id="contenedorR"> </div>
      </div>
      <div class="contenedorIconos"> 
        <img class="iconos" src = "img/miautiLogo.jpg"> 
        <img class="iconos" src="img/logoKura.png"> 
        <img class="iconos" src="img/logo_evento.png"> 
      </div>
    </div></div>
    <footer>
      <img class="iconosFooter" src="img/logo_evento.png"> 
      <a href="https://www.facebook.com/KuraHearth">
        <img class="iconosFooter" src="img/logoKura.png"> 
      </a>
      <a href="https://www.facebook.com/miautichiquita">
        <img class="iconosFooter" src="img/miautiLogo.jpg"> 
      </a>
  
     
    </footer>

  
    <script>
      const $seleccionArchivos = document.querySelector("#seleccionArchivos"),
      $imagenPrevisualizacion = document.querySelector("#imagenPrevisualizacion");

      // Escuchar cuando cambie
      $seleccionArchivos.addEventListener("change", () => {
      // Los archivos seleccionados, pueden ser muchos o uno
      const archivos = $seleccionArchivos.files;
      // Si no hay archivos salimos de la función y quitamos la imagen
      if (!archivos || !archivos.length) {
        $imagenPrevisualizacion.src = "";
        return;
      }
      // Ahora tomamos el primer archivo, el cual vamos a previsualizar
      const primerArchivo = archivos[0];
      // Lo convertimos a un objeto de tipo objectURL
      const objectURL = URL.createObjectURL(primerArchivo);
      // Y a la fuente de la imagen le ponemos el objectURL
      $imagenPrevisualizacion.src = objectURL;
      });

     
      function guardarTextoP() {
  // Obtener el valor del campo de entrada
  const texto = document.getElementById("namePer").value;
  

  // Asignar el valor al contenido del contenedor de destino
  document.getElementById("personaje").innerText = texto;
}
function guardarTextoQ() {
  // Obtener el valor del campo de entrada
  const texto = document.getElementById("descriQ").value;
  

  // Asignar el valor al contenido del contenedor de destino
  document.getElementById("contenedorQ").innerText = texto;
}
function guardarTextoW() {
  // Obtener el valor del campo de entrada
  const texto = document.getElementById("descriW").value;
  

  // Asignar el valor al contenido del contenedor de destino
  document.getElementById("contenedorW").innerText = texto;
}
function guardarTextoE() {
  // Obtener el valor del campo de entrada
  const texto = document.getElementById("descriE").value;
  

  // Asignar el valor al contenido del contenedor de destino
  document.getElementById("contenedorE").innerText = texto;
}
function guardarTextoR() {
  // Obtener el valor del campo de entrada
  const texto = document.getElementById("descriR").value;
  

  // Asignar el valor al contenido del contenedor de destino
  document.getElementById("contenedorR").innerText = texto;
}
function mostrarImagen() {
  var lista = document.getElementById("lista");
  var imagen = document.getElementById("imagen");
  var opcionSeleccionada = lista.options[lista.selectedIndex].value;
  imagen.src = opcionSeleccionada;
}
function downloadImage(){
	 html2canvas(document.querySelector("#box")).then(canvas => {
		a = document.createElement('a'); 
		document.body.appendChild(a); 
		a.download = "test.png"; 
		a.href =  canvas.toDataURL();
		a.click();
	});	 
 }
    </script>
  </body>
</html>
